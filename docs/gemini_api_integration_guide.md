1ë‹¨ê³„: ë¹„ìš© ë° êµ¬ë… (ìœ ë£Œ êµ¬ë…ì€ í•„ìš”í•œê°€?)
ê²°ë¡ : ì•„ë‹ˆìš”, í”„ë¡œì íŠ¸ ê°œë°œ ë° ê³µëª¨ì „ ì‹œì—° ëª©ì ìœ¼ë¡  ìœ ë£Œ êµ¬ë…ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤.
Google AI for Developers ë¬´ë£Œ ë“±ê¸‰ (Free Tier): Googleì€ ê°œë°œìë“¤ì´ Gemini APIë¥¼ í…ŒìŠ¤íŠ¸í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œí•  ìˆ˜ ìˆë„ë¡ ë„‰ë„‰í•œ ë¬´ë£Œ ì‚¬ìš©ëŸ‰ì„ ì œê³µí•©ë‹ˆë‹¤.
Gemini Pro ëª¨ë¸ ê¸°ì¤€, ë¶„ë‹¹ 60íšŒ ìš”ì²­(RPM)ê¹Œì§€ ë¬´ë£Œì…ë‹ˆë‹¤.
í•™ìƒ í”„ë¡œì íŠ¸ë‚˜ ì´ˆê¸° ìŠ¤íƒ€íŠ¸ì—… ìˆ˜ì¤€ì—ì„œëŠ” ì´ ë¬´ë£Œ ì‚¬ìš©ëŸ‰ì„ ì´ˆê³¼í•  ì¼ì´ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.
ìœ ë£Œ êµ¬ë…ê³¼ì˜ ì°¨ì´ì : ì‚¬ìš©ìë“¤ì´ ì›” ìš”ê¸ˆì„ ë‚´ê³  ì‚¬ìš©í•˜ëŠ” 'Gemini Advanced'(Google One êµ¬ë…)ëŠ” ì±—ë´‡ ì„œë¹„ìŠ¤ ìì²´ë¥¼ ë” ë§ì´, ë” ë¹ ë¥´ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì†Œë¹„ììš© ìƒí’ˆì…ë‹ˆë‹¤. ìš°ë¦¬ê°€ ì‚¬ìš©í•  ê²ƒì€ ê°œë°œìë¥¼ ìœ„í•œ API ì„œë¹„ìŠ¤ë¡œ, ë³„ê°œì˜ ê³¼ê¸ˆ ì²´ê³„ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
ë”°ë¼ì„œ ë¹„ìš© ê±±ì • ì—†ì´ í¸í•˜ê²Œ ê°œë°œì„ ì‹œì‘í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
2ë‹¨ê³„: API í‚¤ ë°œê¸‰ë°›ê¸°
ì´ê²ƒì´ Geminiì˜ ëŠ¥ë ¥ì„ ìš°ë¦¬ ì„œë²„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” 'ë§ˆë²• ì—´ì‡ 'ì…ë‹ˆë‹¤.
Google AI Studio ì ‘ì†: ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ Google AI Studioë¡œ ì´ë™í•˜ê³  êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•©ë‹ˆë‹¤.
API í‚¤ ìƒì„±:
ì™¼ìª½ ë©”ë‰´ì—ì„œ "Get API key" íƒ­ì„ í´ë¦­í•©ë‹ˆë‹¤.
"Create API key in new project" ë²„íŠ¼ì„ ëˆ„ë¦…ë‹ˆë‹¤.
ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì¦‰ì‹œ ê¸´ ë¬¸ìì—´ í˜•íƒœì˜ API í‚¤ê°€ ìƒì„±ë©ë‹ˆë‹¤. ì´ í‚¤ë¥¼ ì•ˆì „í•œ ê³³ì— ë³µì‚¬í•´ ë‘ì„¸ìš”. (ì£¼ì˜: ì´ í‚¤ëŠ” ë¹„ë°€ë²ˆí˜¸ì²˜ëŸ¼ ì™¸ë¶€ì— ë…¸ì¶œë˜ë©´ ì•ˆ ë©ë‹ˆë‹¤!)
Spring Boot í”„ë¡œì íŠ¸ì— í‚¤ ì €ì¥:
src/main/resources/application.properties íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì´ í‚¤ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ì ˆëŒ€ Java ì½”ë“œ ì•ˆì— ì§ì ‘ ë¬¸ìì—´ë¡œ ë„£ì§€ ë§ˆì„¸ìš”.
code
Properties
# application.properties
gemini.api.key=ì—¬ê¸°ì—_ë³µì‚¬í•œ_API_í‚¤ë¥¼_ë¶™ì—¬ë„£ìœ¼ì„¸ìš”
3ë‹¨ê³„: ì´ë¯¸ì§€ ë¶„ì„ì„ ìœ„í•œ í•µì‹¬ ë¡œì§ ë° í”„ë¡¬í”„íŠ¸ ì„¤ê³„
ì´ì œ Spring Boot ì„œë²„ê°€ Geminiì—ê²Œ ì–´ë–»ê²Œ ì¼ì„ ì‹œí‚¬ì§€ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ê³„í•©ë‹ˆë‹¤.
A. í•µì‹¬ ë¡œì§ íë¦„
React(í”„ë¡ íŠ¸ì—”ë“œ)ì—ì„œ ì‚¬ìš©ìê°€ 'ì‹¤ì¢… ë™ë¬¼ ì‚¬ì§„ A'ì™€ 'ë³´í˜¸ ì¤‘ì¸ ë™ë¬¼ ì‚¬ì§„ B'ë¥¼ ì—…ë¡œë“œí•©ë‹ˆë‹¤.
Spring Boot ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì´ ë‘ ì´ë¯¸ì§€ íŒŒì¼ì„ MultipartFile í˜•íƒœë¡œ ë°›ìŠµë‹ˆë‹¤.
ì„œë¹„ìŠ¤ ê³„ì¸µ(Service Layer)ì—ì„œ ë°›ì€ ì´ë¯¸ì§€ íŒŒì¼ë“¤ì„ Base64 ë¬¸ìì—´ë¡œ ì¸ì½”ë”©í•©ë‹ˆë‹¤.
ì™œ? API ìš”ì²­ì€ ìˆœìˆ˜í•œ í…ìŠ¤íŠ¸(JSON)ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ë¯¸ì§€ íŒŒì¼ ìì²´ë¥¼ ë³´ë‚¼ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ì´ë¯¸ì§€ë¥¼ í…ìŠ¤íŠ¸ í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” í‘œì¤€ ë°©ì‹ì´ Base64 ì¸ì½”ë”©ì…ë‹ˆë‹¤.
ë¯¸ë¦¬ ì„¤ê³„í•´ ë‘” **í”„ë¡¬í”„íŠ¸(ëª…ë ¹ì–´)**ì™€ Base64ë¡œ ì¸ì½”ë”©ëœ ë‘ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì¡°í•©í•˜ì—¬ Gemini APIì— ë³´ë‚¼ **ìš”ì²­ ë³¸ë¬¸(JSON)**ì„ ë§Œë“­ë‹ˆë‹¤.
RestTemplate ë˜ëŠ” WebClientë¥¼ ì‚¬ìš©í•˜ì—¬ Gemini API ì—”ë“œí¬ì¸íŠ¸ë¡œ ì´ JSONì„ ë‹´ì•„ POST ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
Gemini APIë¡œë¶€í„° ë¶„ì„ ê²°ê³¼ê°€ ë‹´ê¸´ JSON ì‘ë‹µì„ ë°›ìŠµë‹ˆë‹¤.
ì´ ì‘ë‹µì„ íŒŒì‹±(í•´ì„)í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œì— ì „ë‹¬í•˜ê¸° ì¢‹ì€ í˜•íƒœë¡œ ê°€ê³µí•œ ë’¤, ìµœì¢… ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
B. í”„ë¡¬í”„íŠ¸ ì„¤ê³„ (ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„!)
Geminiê°€ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²°ê³¼ë¬¼ì„ ì •í™•íˆ ë§Œë“¤ì–´ë‚´ë„ë¡ ì§€ì‹œí•˜ëŠ” 'ëª…ë ¹ì„œ'ë¥¼ ì‘ì„±í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. ì´ í”„ë¡¬í”„íŠ¸ì˜ í’ˆì§ˆì´ ê²°ê³¼ë¬¼ì˜ í’ˆì§ˆì„ ê²°ì •í•©ë‹ˆë‹¤.
[ë§¤ìš° íš¨ê³¼ì ì¸ í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ]
code
Code
You are a highly intelligent AI assistant specializing in finding lost pets.
Your task is to analyze and compare the two provided images.

Based on your analysis, provide the result ONLY in a valid JSON format. Do not add any other explanatory text before or after the JSON block.

The JSON object must contain the following fields:
- "similarityScore": An integer between 0 and 100 representing the likelihood that the animals in the two images are the same.
- "positiveFactors": An array of strings describing features that are similar between the two animals (e.g., "Similar white patch on the chest", "Same breed identified as Maltese").
- "negativeFactors": An array of strings describing features that are different or uncertain (e.g., "Eye color is hard to determine in the first image", "Apparent size difference, but could be due to camera angle").
- "finalVerdict": A brief, one-sentence conclusion in Korean.

Now, analyze the two images provided.
ì™œ ì´ í”„ë¡¬í”„íŠ¸ê°€ ì¢‹ì„ê¹Œìš”?
ì—­í•  ë¶€ì—¬ (Persona): "ì‹¤ì¢… ë™ë¬¼ ì°¾ê¸° ì „ë¬¸ê°€"ë¼ëŠ” ì—­í• ì„ ë¶€ì—¬í•˜ì—¬ AIì˜ ë‹µë³€ ë°©í–¥ì„±ì„ ì„¤ì •í•©ë‹ˆë‹¤.
ëª…í™•í•œ ì§€ì‹œ (Task): ë‘ ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•˜ê³  ë¹„êµí•˜ë¼ëŠ” ëª…í™•í•œ ëª©í‘œë¥¼ ì œì‹œí•©ë‹ˆë‹¤.
ì¶œë ¥ í˜•ì‹ ê°•ì œ (Format): "ONLY in a valid JSON format" ë¼ê³  ëª…ì‹œí•˜ì—¬, ì„œë²„ê°€ ë‹¤ë£¨ê¸° í˜ë“  ë¶ˆí•„ìš”í•œ ë¬¸ì¥("ë„¤, ë¶„ì„í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤." ë“±)ì„ ì œì™¸í•˜ê³  ê¹”ë”í•œ ë°ì´í„°ë§Œ ë°›ë„ë¡ ê°•ì œí•©ë‹ˆë‹¤.
ìƒì„¸í•œ ìŠ¤í‚¤ë§ˆ ì •ì˜ (Schema): JSONì— ì–´ë–¤ í•„ë“œ(similarityScore, positiveFactors ë“±)ê°€ ë“¤ì–´ê°€ì•¼ í•˜ê³ , ê° í•„ë“œì˜ ë°ì´í„° íƒ€ì…(ì •ìˆ˜, ë¬¸ìì—´ ë°°ì—´ ë“±)ì´ ë¬´ì—‡ì¸ì§€ ëª…í™•í•˜ê²Œ ì•Œë ¤ì£¼ì–´ ì¼ê´€ëœ ê²°ê³¼ë¥¼ ì–»ê²Œ í•©ë‹ˆë‹¤.
4ë‹¨ê³„: Spring Boot ì‹¤ì œ êµ¬í˜„ (ì½”ë“œ ì˜ˆì‹œ)
A. API ìš”ì²­ì„ ë³´ë‚´ê¸° ìœ„í•œ DTO(Data Transfer Object) ìƒì„±
Gemini APIì— ë³´ë‚¼ JSON ìš”ì²­ ë³¸ë¬¸ê³¼ ì‘ë‹µì„ Java ê°ì²´ë¡œ ì‰½ê²Œ ë‹¤ë£¨ê¸° ìœ„í•´ í´ë˜ìŠ¤ë¥¼ ë§Œë“­ë‹ˆë‹¤.
code
Java
// ìš”ì²­ Bodyë¥¼ ìœ„í•œ í´ë˜ìŠ¤ë“¤
record GeminiRequest(List<Content> contents) {}
record Content(List<Part> parts) {}
// PartëŠ” í…ìŠ¤íŠ¸ê°€ ë  ìˆ˜ë„, ì´ë¯¸ì§€ê°€ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
record Part(String text, InlineData inlineData) {
public static Part fromText(String text) {
return new Part(text, null);
}
public static Part fromImage(String mimeType, String base64Data) {
return new Part(null, new InlineData(mimeType, base64Data));
}
}
record InlineData(String mimeType, String data) {}

// ì‘ë‹µ Bodyë¥¼ íŒŒì‹±í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë“¤ (ì‹¤ì œ ì‘ë‹µ êµ¬ì¡°ì— ë§ê²Œ ì¡°ì • í•„ìš”)
record GeminiResponse(...) {}
B. ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ êµ¬í˜„
code
Java
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;
import org.springframework.web.client.RestTemplate;
import org.springframework.web.multipart.MultipartFile;
import java.util.Base64;
import java.util.List;

@Service
public class GeminiService {

    @Value("${gemini.api.key}")
    private String apiKey;

    private final RestTemplate restTemplate = new RestTemplate();

    public String analyzeImages(MultipartFile imageA, MultipartFile imageB) throws IOException {
        // 1. API URL ë° í”„ë¡¬í”„íŠ¸ ì •ì˜
        String url = "https://generativelanguage.googleapis.com/v1beta/models/gemini-pro-vision:generateContent?key=" + apiKey;
        String prompt = "You are a highly intelligent AI assistant... (ìœ„ì— ì‘ì„±í•œ í”„ë¡¬í”„íŠ¸ ì „ì²´)"; // í”„ë¡¬í”„íŠ¸ ì „ì²´

        // 2. ì´ë¯¸ì§€ íŒŒì¼ Base64 ì¸ì½”ë”©
        String base64ImageA = Base64.getEncoder().encodeToString(imageA.getBytes());
        String base64ImageB = Base64.getEncoder().encodeToString(imageB.getBytes());

        // 3. API ìš”ì²­ ë³¸ë¬¸(JSON) ìƒì„±
        List<Part> parts = List.of(
                Part.fromText(prompt),
                Part.fromImage(imageA.getContentType(), base64ImageA),
                Part.fromImage(imageB.getContentType(), base64ImageB)
        );
        GeminiRequest requestBody = new GeminiRequest(List.of(new Content(parts)));

        // 4. API í˜¸ì¶œ ë° ì‘ë‹µ ë°›ê¸°
        // ì‹¤ì œë¡œëŠ” HttpEntityë¥¼ ë§Œë“¤ê³  í—¤ë”ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì´ ë” ì¢‹ìŠµë‹ˆë‹¤.
        GeminiResponse response = restTemplate.postForObject(url, requestBody, GeminiResponse.class);

        // 5. ì‘ë‹µì—ì„œ í•„ìš”í•œ í…ìŠ¤íŠ¸(ìš°ë¦¬ê°€ ìš”ì²­í•œ JSON) ì¶”ì¶œ
        // response ê°ì²´ êµ¬ì¡°ë¥¼ íŒŒì‹±í•´ì„œ ìµœì¢… í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.
        // String resultJson = response.getCandidates().get(0).getContent().getParts().get(0).getText();
        
        // return resultJson; // ì´ ê²°ê³¼ê°€ í”„ë¡ íŠ¸ì—”ë“œë¡œ ì „ë‹¬ë  JSON ë¬¸ìì—´ì…ë‹ˆë‹¤.
        
        // ì„ì‹œ ë°˜í™˜ ê°’
        return "API í˜¸ì¶œ í›„, Geminiê°€ ìƒì„±í•œ JSON ì‘ë‹µì´ ì—¬ê¸°ì— ë‹´ê¹ë‹ˆë‹¤.";
    }
}
5ë‹¨ê³„: ê²°ê³¼ ë„ì¶œ ë° í™œìš©
ìœ„ analyzeImages ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ë©´, GeminiëŠ” ìš°ë¦¬ê°€ ì„¤ê³„í•œ í”„ë¡¬í”„íŠ¸ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì€ JSON í˜•ì‹ì˜ ë¬¸ìì—´ì„ ë°˜í™˜í•  ê²ƒì…ë‹ˆë‹¤.
[ì˜ˆìƒ ê²°ê³¼ë¬¼]
code
JSON
{
"similarityScore": 85,
"positiveFactors": [
"Both appear to be a brown Poodle mix.",
"A distinctive black spot is visible above the left eye in both images.",
"Similar body size and curly fur texture."
],
"negativeFactors": [
"The collar in the first image is red, but it's blue in the second.",
"The lighting conditions are different, making a perfect fur color comparison difficult."
],
"finalVerdict": "ëª©ê±¸ì´ ìƒ‰ì€ ë‹¤ë¥´ì§€ë§Œ, íŠ¹ì´í•œ ë°˜ì ê³¼ í’ˆì¢…ì´ ì¼ì¹˜í•˜ì—¬ ë™ì¼í•œ ë™ë¬¼ì¼ ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤."
}
ì´ ê²°ê³¼ ë¬¸ìì—´ì„ ë°›ì€ Spring Boot ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ê·¸ëŒ€ë¡œ React í”„ë¡ íŠ¸ì—”ë“œë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ì´ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ UIë¥¼ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ ì•„ì´ê°€ ì•„ë‹ê¹Œìš”? (ìœ ì‚¬ë„: 85%)
âœ”ï¸ ë¹„ìŠ·í•œ ì 
ë‘ ë™ë¬¼ ëª¨ë‘ ê°ˆìƒ‰ í‘¸ë“¤ ë¯¹ìŠ¤ë¡œ ë³´ì…ë‹ˆë‹¤.
ì™¼ìª½ ëˆˆ ìœ„ì— ëšœë ·í•œ ê²€ì€ ì ì´ ë™ì¼í•˜ê²Œ ë³´ì…ë‹ˆë‹¤.
âš ï¸ ë‹¤ë¥¸/ë¶ˆí™•ì‹¤í•œ ì 
ì²« ë²ˆì§¸ ì‚¬ì§„ì˜ ëª©ê±¸ì´ëŠ” ë¹¨ê°„ìƒ‰ì´ì§€ë§Œ, ë‘ ë²ˆì§¸ ì‚¬ì§„ì—ì„œëŠ” íŒŒë€ìƒ‰ì…ë‹ˆë‹¤.
ğŸ’¬ ìµœì¢… ë¶„ì„
ëª©ê±¸ì´ ìƒ‰ì€ ë‹¤ë¥´ì§€ë§Œ, íŠ¹ì´í•œ ë°˜ì ê³¼ í’ˆì¢…ì´ ì¼ì¹˜í•˜ì—¬ ë™ì¼í•œ ë™ë¬¼ì¼ ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤.