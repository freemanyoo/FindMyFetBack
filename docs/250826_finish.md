---

# '찾아줘요' 프로젝트 개발 요약 및 최종 가이드

**문서 버전: 1.2**
**작성일: 2025-08-26**

## 1. 프로젝트 목표 및 기술 스택

-   **핵심 목표**: 실종/유기동물 정보를 지도 기반으로 공유하는 웹 플랫폼 개발
-   **백엔드**: Spring Boot, Spring Data JPA, QueryDSL, Spring Security, MariaDB
-   **프론트엔드**: React, React Router, Axios, Context API (인증 관리)
-   **개발 환경**: IntelliJ (IDEA, Webstorm), Docker

---

## 2. 백엔드 개발 현황 및 주요 결정사항 (Q&A)

### 2.1. 구현 완료된 기능

-   **게시글(Post) API**: 이미지 첨부를 포함한 생성(C), 조회(R), 수정(U), 삭제(D) 기능 전체 구현 완료.
-   **고급 기능**: '찾기 완료' 처리 및 '내가 쓴 글' 목록 조회 기능 구현 완료.
-   **동적 검색 및 페이징**: `QueryDSL`을 활용하여 게시글 종류(`type`), 동물 분류(`category`), 지역(`location`), 키워드(`keyword`)를 조합한 모든 검색 및 페이지네이션 기능 구현 완료.
-   **검색 옵션 제공 API**: 프론트엔드 UI 구성을 위한 동물 카테고리/품종 목록(`GET /api/categories`) 및 지역 목록(`GET /api/regions`) 제공 API 구현 완료.
-   **코드 품질 개선**: 초기 구현 이후 아래와 같은 리팩토링을 통해 코드의 완성도를 높임.
    -   `PostListResponseDto`에 첫 번째 이미지 URL을 `thumbnailUrl`로 추가.
    -   `search` 관련 기능들을 독립적인 패키지로 분리.
    -   사용하지 않는 `findAllPosts()` 메소드 제거.

### 2.2. 주요 기술적 결정 (Q&A 요약)

> **Q: 지역 검색은 어떤 필드를 기준으로 하나요?**
>
> **A:** 게시글 목록 조회 시 `region` 파라미터는 **`Post` 엔티티의 `location` 필드와 정확히 일치하는 것을 기준**으로 검색합니다. 이 `location` 값은 프론트엔드의 '지역 선택 드롭다운'을 통해 규격화된 값(예: "서울시")만 저장됩니다.

> **Q: `SearchService.getRegionList()`의 역할은 무엇인가요?**
>
> **A:** 프론트엔드 UI의 **'지역 선택 드롭다운 메뉴'에 표시될 선택지 목록을 제공**하는 역할입니다. 이를 통해 사용자는 정해진 지역명만 선택할 수 있어 데이터의 일관성을 보장합니다.

> **Q: 게시판이 'missing', 'shelter' 두 종류인데, 현재 백엔드로 구현 가능한가요?**
>
> **A:** **네, 100% 가능합니다.** `Post` 엔티티의 `postType` 필드와 `GET /api/posts` API의 `type` 파라미터를 통해 두 종류의 게시판을 완벽하게 구분하고 조회할 수 있도록 설계되었습니다.

---

## 3. 프론트엔드 개발 현황 및 구조 설계

### 3.1. 개발 접근 방식: "뼈대부터 만들고 살 붙이기"

-   **1단계 (Top-down)**: `App.jsx`에서 `react-router-dom`으로 전체 페이지 경로(라우팅)를 설정하고, 각 페이지의 '빈 껍데기' 컴포넌트와 공통 `MainLayout`을 먼저 구성합니다.
-   **2단계 (Bottom-up)**: 특정 페이지(예: `PostListPage`)에 집중하여, 해당 페이지를 구성하는 작은 재사용 컴포넌트(`PostCard`, `Pagination` 등)를 먼저 개발합니다.
-   **3단계 (Data Binding)**: 완성된 UI에 `axios`를 통해 실제 백엔드 API 데이터를 연동합니다.

### 3.2. 최종 폴더 구조 표준안

모든 팀원은 아래의 통일된 폴더 구조를 따릅니다.

```
src/
├── api/              # API 호출 관련
├── components/       # 재사용 UI 조각
├── context/          # 전역 상태 (AuthContext)
├── features/         # 복합 기능 단위 (CommentSection)
├── layouts/          # 페이지 레이아웃 (MainLayout, Header, Footer)
├── pages/            # 페이지 단위 컴포넌트
├── styles/           # 전역 CSS
├── App.jsx           # 최상위 라우팅
└── main.jsx          # 프로젝트 진입점
```

---

## 4. 백엔드-프론트엔드 연동 가이드

### 4.1. To. 지도 기능 담당자

-   **위치 정보 저장**: 게시글 작성/수정 시, 사용자가 지도에서 선택한 위치의 `latitude`, `longitude`, `location` 값을 `PostCreateRequestDto` 또는 `PostUpdateRequestDto`에 담아 `POST /api/posts` API를 호출하면 됩니다.
-   **위치 정보 표시**: `GET /api/posts/{postId}` API 응답 객체(`PostDetailResponseDto`)에 포함된 `latitude`, `longitude` 값을 지도 라이브러리의 마커 표시에 사용하면 됩니다.

### 4.2. To. 댓글 기능 담당자

-   **댓글과 게시글의 관계**: `Comment` 엔티티는 반드시 `Post` 엔티티를 `@ManyToOne` 관계로 참조해야 합니다.
-   **게시글 삭제 시 댓글 처리**: `Post` 엔티티에 `cascade = CascadeType.ALL` 옵션을 추가할 예정입니다. 따라서 **게시글이 삭제되면 연관된 모든 댓글은 JPA가 자동으로 함께 삭제**해주므로, 별도의 댓글 삭제 로직을 만들 필요가 없습니다.

---

## 5. 향후 진행 과제 (Next Steps)

### 5.1. 전역 예외 처리 (백엔드)

-   **목표**: 모든 API 에러 응답을 기획서에 명시된 일관된 JSON 형식으로 통일합니다.
-   **구현**: `@RestControllerAdvice`와 `@ExceptionHandler`를 사용하는 `GlobalExceptionHandler.java` 클래스를 추가하여 `IllegalArgumentException`, `AccessDeniedException` 등의 예외를 중앙에서 처리합니다.

### 5.2. Spring Security 연동 (백엔드)

-   **목표**: `PostController` 등에서 사용 중인 임시 사용자 ID(`tempUserId = 1L`)를 실제 로그인된 사용자 정보로 교체합니다.
-   **구현**:
    1.  Spring Security 관련 설정(`SecurityConfig`, `JwtAuthenticationFilter` 등)이 완료되었다는 전제 하에,
    2.  `PostController`의 각 메소드 파라미터에 `@AuthenticationPrincipal UserDetailsImpl userDetails`를 추가합니다.
    3.  `Long userId = userDetails.getUser().getUserid();` 코드로 실제 사용자 ID를 가져와 서비스 로직에 전달합니다.

### 5.3. 프론트엔드 "살 붙이기"

-   "뼈대 세우기"가 완료되었으므로, `PostListPage`, `PostDetailPage` 등 각 페이지의 구체적인 UI를 `react-bootstrap`과 같은 라이브러리를 활용하여 구현하고, `api` 폴더에 정의된 함수를 통해 실제 데이터를 연동하는 작업을 진행합니다.