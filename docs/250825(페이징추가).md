네, 알겠습니다. 저희가 나눈 대화의 처음부터 지금까지의 모든 내용을 종합하여, 요청하신 대로 상세하고 정확한 `.md` 파일 형식의 요약본을 작성해 드리겠습니다.

시간이 걸리더라도 각 항목을 꼼꼼하게 검토하여 최상의 결과물을 제공하겠습니다.

---

# '찾아줘요' 프로젝트 백엔드 개발 현황 및 리뷰 요약

**문서 버전: 1.0**
**작성일: 2025-08-25**

본 문서는 '찾아줘요' 프로젝트의 백엔드 개발 과정 전반에 대한 요약입니다. 제공된 모든 클래스 파일의 기능 분석, 주요 질의응답(Q&A) 내용, 그리고 기획서 대비 현재까지의 개발 진행률 및 향후 과제를 체계적으로
정리했습니다.

## 1. 클래스별 기능 및 코드 분석

### Ⅰ. 설정 계층 (`Configuration`)

#### `RootConfig.java`

- **기능**: 프로젝트 전반의 공통 Bean 설정을 담당합니다.
- **주요 설정**:
    - `ModelMapper`: Entity와 DTO 간의 데이터 변환을 자동화하는 `ModelMapper`를 Bean으로 등록합니다. `LOOSE` 전략을 사용하여 유연한 매핑을 지원합니다.
    - `@EnableJpaAuditing`: `BaseEntity`의 `createdAt`, `updatedAt` 필드가 자동으로 채워지도록 JPA Auditing 기능을 활성화합니다.

#### `SwaggerConfig.java`

- **기능**: Swagger UI API 문서 자동화를 위한 설정을 담당합니다.
- **주요 설정**:
    - `openAPI()`: API 문서의 제목, 설명 등 기본 정보를 설정합니다.
    - **JWT 인증 설정**: Swagger UI에서 API 테스트 시 `Authorization` 헤더에 Bearer 토큰을 포함시킬 수 있도록 보안 관련 설정을 추가했습니다.

### Ⅱ. 도메인 계층 (`Entity & Enum`)

#### `BaseEntity.java`

- **기능**: 엔티티들의 공통 필드(생성/수정 시간)를 추상화한 클래스입니다.
- **주요 변수**:
    - `createdAt`: `@CreatedDate`를 통해 엔티티 생성 시 시간이 자동 기록됩니다.
    - `updatedAt`: `@LastModifiedDate`를 통해 엔티티 수정 시 시간이 자동 기록됩니다.

#### `Post.java`

- **기능**: 게시글의 모든 정보를 담고 데이터베이스 `post` 테이블과 매핑되는 핵심 엔티티입니다.
- **주요 변수**:
    - `@ManyToOne(fetch = FetchType.LAZY) private User user;`: `User` 엔티티와 N:1 연관관계를 맺습니다. **지연 로딩(LAZY)**으로 설정하여 불필요한
      User 테이블 조회를 방지합니다.
    - `@OneToMany(mappedBy = "post", cascade = CascadeType.ALL, orphanRemoval = true) private List<Image> images;`:
      `Image` 엔티티와 1:N 연관관계를 맺습니다. `Post`의 생명주기에 따라 `Image`가 함께 저장/삭제되도록 **영속성 전이(Cascade)** 옵션을 설정했습니다.
- **주요 메소드**:
    - `addImage(Image image)`: 게시글에 이미지를 추가하는 연관관계 편의 메소드입니다.
    - `update(...)`: 게시글의 내용을 수정하는 비즈니스 로직입니다. (개선 제안 있음)
    - `complete()`: 게시글의 상태를 '완료(COMPLETED)'로 변경합니다.

#### `Image.java`, `User.java`

- **기능**: 각각 이미지 정보와 사용자 정보를 DB 테이블과 매핑하는 엔티티입니다.
- **주요 변수**:
    - `Image`: `Post` 엔티티와 N:1 관계를 맺습니다.
    - `User`: `Post` 엔티티와 1:N 관계의 주체가 됩니다.

#### `PostType.java`, `Status.java`, `Role.java`

- **기능**: 데이터의 일관성을 보장하기 위한 열거형(Enum) 타입입니다. (게시글 종류, 상태, 사용자 권한)

### Ⅲ. 데이터 접근 계층 (`Repository`)

#### `PostRepository.java`

- **기능**: `Post` 엔티티에 대한 데이터베이스 CRUD 작업을 담당하는 인터페이스입니다.
- **변경 전**: `JpaRepository`만 상속받아 기본적인 CRUD와 커스텀 쿼리 메소드(`findByUser_Userid...`)를 가졌습니다.
- **변경 후 (페이징 적용)**: 동적 검색 쿼리를 처리하기 위한 `PostRepositoryCustom` 인터페이스를 추가로 상속받도록 변경되었습니다.
  ```java
  // 변경 후
  public interface PostRepository extends JpaRepository<Post, Long>, PostRepositoryCustom { ... }
  ```

#### `PostRepositoryCustom.java` & `PostRepositoryCustomImpl.java` (신규 추가)

- **기능**: **QueryDSL**을 사용하여 페이징 및 동적 검색 조건(게시글 타입, 동물 종류, 지역, 키워드 등)을 처리하는 로직을 구현합니다.
- **주요 메소드**:
    - `search(PageRequestDTO, Pageable)`: `PageRequestDTO`로 받은 검색 조건들을 `BooleanBuilder`로 조합하여 동적으로 `WHERE` 절을 생성하고,
      `Pageable` 객체를 이용해 페이징 처리된 결과를 `Page<Post>` 형태로 반환합니다.

### Ⅳ. 비즈니스 로직 계층 (`Service`)

#### `PostService.java` (인터페이스) & `PostServiceImpl.java` (구현체)

- **기능**: 게시글 관련 모든 핵심 비즈니스 로직을 수행합니다.
- **주요 메소드**:
    - `createPost`, `updatePost`, `deletePost`, `completePost`: 기본적인 CRUD 및 상태 변경 로직을 담당합니다.
    - `validatePostAuthorOrAdmin(Post post, Long userId)`: **(중요)** 게시글 수정/삭제 등 민감한 작업 수행 전, 현재 로그인한 사용자가 **게시글 작성자
      본인이거나 관리자인지 검증**하는 핵심 보안 로직입니다.
- **변경 사항 요약 (페이징 적용)**:
    - `findAllPosts` 메소드의 시그니처가 크게 변경되었습니다.
    - **변경 전**: `List<PostListResponseDto> findAllPosts()`
    - **변경 후**: `PageResponseDTO<PostListResponseDto> findAllPosts(PageRequestDTO pageRequestDTO)`
    - **로직 변경**: `postRepository.findAll()`을 호출하던 방식에서, QueryDSL로 구현된 `postRepository.search()`를 호출하여 동적 검색과 페이징을 동시에
      처리하고, 그 결과를 `PageResponseDTO`로 가공하여 반환하도록 변경되었습니다.

#### `FileUploadService.java` & `FileUploadServiceImpl.java`

- **기능**: 파일(이미지)의 물리적인 업로드 및 삭제를 처리합니다. 인터페이스와 구현체로 분리하여 향후 AWS S3 등 다른 스토리지로 쉽게 교체할 수 있는 유연한 구조를 가집니다.

### Ⅴ. 데이터 전송 객체 계층 (`DTO`)

- **기능**: 각 DTO는 특정 목적(생성, 수정, 상세 조회, 목록 조회 등)에 맞게 계층 간 데이터를 전달하는 역할을 수행하여 Entity를 안전하게 보호합니다.
- **신규 추가 (페이징 적용)**:
    - **`PageRequestDTO.java`**: 클라이언트(프론트엔드)로부터 **페이지 번호(`page`), 페이지당 개수(`size`), 각종 검색 조건**을 전달받는 DTO입니다. 기본 `size`를
      **9**로 설정하여 3x3 그리드 요구사항을 반영했습니다.
    - **`PageResponseDTO.java`**: 서버가 클라이언트로 페이징 처리 결과를 전달하는 DTO입니다. 단순히 데이터 목록뿐만 아니라, 프론트엔드가 페이지네이션 UI를 쉽게 그릴 수 있도록 *
      *전체 데이터 수, 시작/끝 페이지 번호, 이전/다음 페이지 존재 여부**까지 모두 계산하여 제공합니다.
      --
      - PageResponseDTO<E>: 최종적으로 손님(프론트엔드)에게 나갈 '페이징 정식 세트' 그릇입니다. 이 그릇에는 메인 요리(dtoList), 총 요리 수(total), 코스 정보(start, end
      페이지 등)를 담는 공간이 마련되어 있습니다.

      - PageRequestDTO: 손님의 **'주문서'**입니다. "3페이지 음식을 주세요. 사이즈는 9개짜리로요. 맵게(검색 조건) 해주세요." 와 같은 요청 정보가 담겨있습니다.

      - PostRepositoryCustom & PostRepositoryCustomImpl (QueryDSL): 주문서(PageRequestDTO)를 보고, 냉장고(DB)에서 재료(데이터)를 꺼내 **'요리하는
        주방장'**입니다. "맵게 해달라"는 동적인 요청에 맞춰 요리법(쿼리)을 바꿔가며 요리합니다.

      - PostService: 주문을 받아 주방장에게 전달하고, 완성된 요리를 '페이징 정식 세트' 그릇에 예쁘게 담아내는 **'홀 매니저'**입니다.

### Ⅵ. 프레젠테이션 계층 (`Controller`)

#### `PostController.java`

- **기능**: 게시글 관련 모든 HTTP 요청(`GET`, `POST`, `PUT`, `DELETE`)을 받아 처리하는 API 엔드포인트입니다.
- **변경 사항 요약 (페이징 적용)**:
    - 게시글 목록 조회 API(`GET /api/posts`)가 `PageRequestDTO`를 파라미터로 받도록 변경되었습니다. 이를 통해 클라이언트는 `?page=2&size=9&category=개`와 같은
      쿼리 파라미터로 페이징 및 검색을 요청할 수 있습니다.
    - 응답 또한 `List`가 아닌 `PageResponseDTO` 객체를 반환하여 페이징 정보를 함께 전달합니다.

---

## 2. 주요 질의응답(Q&A) 요약

#### Q1: `PageResponseDTO`를 사용하기 위해 다른 클래스도 필요한 이유는 무엇인가요?

**A:** `PageResponseDTO`는 페이징 결과를 담는 '완성된 그릇'입니다. 이 그릇을 채우려면, 클라이언트의 요청(`PageRequestDTO`)을 해석하여 동적으로 데이터를 조회하고(QueryDSL을
사용한 `RepositoryCustomImpl`), 페이징 처리를 수행한 후(`Service`), 최종 결과물을 가공하는(`Service`에서 `PageResponseDTO` 빌드) 일련의 과정이 필요합니다. 따라서
이 모든 클래스들은 페이징 기능을 완성하기 위한 하나의 팀처럼 유기적으로 동작합니다.

#### Q2: `javax.validation` import가 안 되는 이유는 무엇인가요?

**A:** `@Min`, `@Max`와 같은 데이터 유효성 검사 어노테이션을 사용하기 위해 필요한 `spring-boot-starter-validation` 의존성이 `build.gradle` 파일에 추가되지
않았기 때문입니다. 해당 의존성을 추가하면 문제가 해결됩니다.

#### Q3: `QPost` 클래스 import가 처음에는 안 되다가 나중에 되는 이유는 무엇인가요?

**A:** `QPost.java`와 같은 Q-타입 클래스는 개발자가 직접 작성하는 파일이 아니라, **QueryDSL 라이브러리가 `@Entity` 어노테이션이 붙은 클래스(예: `Post.java`)를 분석하여
프로젝트 빌드(컴파일) 시점에 자동으로 생성**하는 파일이기 때문입니다. 따라서, 코드를 작성하는 시점에는 파일이 존재하지 않아 import 에러가 발생하지만, 프로젝트가 빌드된 후에는 파일이 생성되어 정상적으로
import할 수 있게 됩니다.

---

## 3. 프로젝트 진행 상황 및 향후 과제

### 1. 백엔드 코드 진행률 분석 (기획서 대비)

| ID             | 기능명             | 백엔드 구현 상태 | 비고                                                                          |
|:---------------|:----------------|:----------|:----------------------------------------------------------------------------|
| **USER-01~03** | 회원가입/로그인/수정     | **진행 중**  | `User` Entity/Repository는 완료. 실제 로직을 담을 Service/Controller 구현 필요.           |
| **POST-01~06** | 게시글 CRUD, 완료 처리 | **완료**    | 모든 핵심 기능 및 권한 검증 로직 구현 완료.                                                  |
| **POST-07**    | 게시글 검색          | **진행 중**  | QueryDSL을 이용한 검색 기능의 기반은 마련됨. API 명세의 모든 검색 조건(`region` 등)을 반영하는 로직 구체화 필요. |
| **CMT-01~03**  | 댓글 작성/수정/삭제     | **시작 전**  | Comment 관련 Entity, DTO, Repository, Service, Controller 구현 필요.              |
| **ADMIN-01**   | 관리자 기능          | **시작 전**  | 관리자 전용 게시글/댓글 강제 삭제 등 API 구현 필요.                                            |

### 2. 추가 및 개선 제안 사항

1. **DTO 유효성 검사(@Valid) 추가 (강력 권장)**: `Controller` 단에서 `@Valid`를 사용하여 클라이언트의 잘못된 입력값을 사전에 차단함으로써 서비스 로직의 안정성을 크게 향상시킬 수
   있습니다.
2. **커스텀 예외 처리**: `PostNotFoundException`과 같은 커스텀 예외를 정의하고, `@RestControllerAdvice`를 사용한 전역 예외 처리기를 구현하여 API 에러 응답을
   표준화해야 합니다.
3. **`Post.update()` 메소드 리팩토링**: 다수의 파라미터를 받는 현재 방식 대신, DTO 객체를 직접 파라미터로 받아 내부 로직을 처리하도록 변경하면 유지보수성이 향상됩니다.

### 3. 앞으로 남은 주요 기능

1. **Spring Security 통합**: 현재 임시 사용자 ID(`tempUserId`)로 처리된 부분을 실제 로그인한 사용자 정보를 가져오도록 `UserDetails`, `JWT` 관련 로직을 완벽하게
   통합해야 합니다.
2. **댓글 시스템 전체 구현**: `Comment` Entity 설계부터 시작하여 CRUD 및 이미지 첨부 기능까지 전체 댓글 시스템을 구현해야 합니다.
3. **회원 관리 기능 구현**: 회원가입, 로그인(JWT 발급), 내 정보 조회/수정 등 사용자 관련 API를 완성해야 합니다.
4. **지도 연동 로직**: 기획서에 명시된 카카오맵 API 연동과 관련하여, 프론트엔드와 주고받을 위치 정보(위도/경도)를 저장하고 조회하는 로직을 최종 점검해야 합니다.
5. **관리자 기능 구현**: `Role.Admin` 권한을 가진 사용자가 모든 게시물과 댓글을 관리할 수 있는 API를 구현해야 합니다.